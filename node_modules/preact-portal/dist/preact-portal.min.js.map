{"version":3,"sources":["../src/preact-portal.js"],"names":["Portal","componentDidUpdate","props","i","this","renderLayer","componentDidMount","componentWillUnmount","remote","parentNode","removeChild","findNode","node","document","querySelector","show","arguments","length","undefined","into","intoPointer","render","h","PortalProxy","context","children","Component","getChildContext","_ref"],"mappings":"gyBAQqBA,EAAAA,SAAAA,2FACpBC,mBAAAA,SAAmBC,OACb,GAAIC,KAAKD,MACTA,EAAMC,KAAKC,KAAKF,MAAMC,SAClBC,MAAKC,2BAKfC,kBAAAA,gBACMD,2BAGNE,qBAAAA,gBACMF,aAAY,GACbD,KAAKI,QAAQJ,KAAKI,OAAOC,WAAWC,YAAYN,KAAKI,qBAG1DG,SAAAA,SAASC,SACa,gBAAPA,GAAkBC,SAASC,cAAcF,GAAQA,eAGhEP,YAAAA,cAAYU,GAAWC,UAAAC,QAAA,GAAAC,SAAAF,UAAA,IAAAA,UAAA,EAElBZ,MAAKF,MAAMiB,OAAOf,KAAKgB,mBACrBA,YAAchB,KAAKF,MAAMiB,KAC1Bf,KAAKe,MAAQf,KAAKI,cAChBA,OAASa,EAAAA,OAAOC,EAAAA,EAACC,EAAD,MAAiBnB,KAAKe,KAAMf,KAAKI,cAElDW,KAAOf,KAAKO,SAASP,KAAKF,MAAMiB,YAGjCX,OAASa,EAAAA,OACbC,EAAAA,KAAaE,QAASpB,KAAKoB,YAChBpB,KAAKF,MAAMuB,UAAY,MAEhCrB,KAAKe,KAAMf,KAAKI,qBAGpBa,OAAAA,iBACQ,UAxC2BK,EAAAA,WA+C9BH,EAAAA,SAAAA,2FACLI,gBAAAA,iBACQvB,MAAKF,MAAMsB,qBAEnBH,OAAAA,SAAAA,MAASI,GAAYG,EAAZH,eACDA,IAAYA,EAAS,IAAM,SALVC,EAAAA","file":"preact-portal.min.js","sourcesContent":["import { h, Component, render } from 'preact';\n\n/** Redirect rendering of descendants into the given CSS selector.\n *  @example\n *    <Portal into=\"body\">\n *      <div>I am rendered into document.body</div>\n *    </Portal>\n */\nexport default class Portal extends Component {\n\tcomponentDidUpdate(props) {\n\t\tfor (let i in props) {\n\t\t\tif (props[i]!==this.props[i]) {\n\t\t\t\treturn this.renderLayer();\n\t\t\t}\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis.renderLayer();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.renderLayer(false);\n\t\tif (this.remote) this.remote.parentNode.removeChild(this.remote);\n\t}\n\n\tfindNode(node) {\n\t\treturn typeof node==='string' ? document.querySelector(node) : node;\n\t}\n\n\trenderLayer(show=true) {\n\t\t// clean up old node if moving bases:\n\t\tif (this.props.into!==this.intoPointer) {\n\t\t\tthis.intoPointer = this.props.into;\n\t\t\tif (this.into && this.remote) {\n\t\t\t\tthis.remote = render(<PortalProxy />, this.into, this.remote);\n\t\t\t}\n\t\t\tthis.into = this.findNode(this.props.into);\n\t\t}\n\n\t\tthis.remote = render((\n\t\t\t<PortalProxy context={this.context}>\n\t\t\t\t{ show && this.props.children || null }\n\t\t\t</PortalProxy>\n\t\t), this.into, this.remote);\n\t}\n\n\trender() {\n\t\treturn null;\n\t}\n}\n\n\n// high-order component that renders its first child if it exists.\n// used as a conditional rendering proxy.\nclass PortalProxy extends Component {\n\tgetChildContext() {\n\t\treturn this.props.context;\n\t}\n\trender({ children }) {\n\t\treturn children && children[0] || null;\n\t}\n}\n"]}